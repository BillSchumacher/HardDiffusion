
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>generate package &#8212; Hard Diffusion 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="canonical" href="https://billschumacher.github.io/HardDiffusion/generate.html" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="generate.templatetags package" href="generate.templatetags.html" />
    <link rel="prev" title="api package" href="api.html" />

   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-XMQ0C7G1SN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XMQ0C7G1SN');
</script>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-generate">
<span id="generate-package"></span><h1>generate package<a class="headerlink" href="#module-generate" title="Permalink to this heading">¶</a></h1>
<p>Generate package</p>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="generate.templatetags.html">generate.templatetags package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="generate.templatetags.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="generate.templatetags.html#module-generate.templatetags.model_extras">generate.templatetags.model_extras module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generate.templatetags.html#generate.templatetags.model_extras.hf_model_name"><code class="docutils literal notranslate"><span class="pre">hf_model_name()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">¶</a></h2>
</section>
<section id="module-generate.admin">
<span id="generate-admin-module"></span><h2>generate.admin module<a class="headerlink" href="#module-generate.admin" title="Permalink to this heading">¶</a></h2>
<p>admin.py for generate app.</p>
</section>
<section id="module-generate.apps">
<span id="generate-apps-module"></span><h2>generate.apps module<a class="headerlink" href="#module-generate.apps" title="Permalink to this heading">¶</a></h2>
<p>Generate app config.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.apps.GenerateConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.apps.</span></span><span class="sig-name descname"><span class="pre">GenerateConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_module</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.apps.GenerateConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AppConfig</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="generate.apps.GenerateConfig.default_auto_field">
<span class="sig-name descname"><span class="pre">default_auto_field</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'django.db.models.BigAutoField'</span></em><a class="headerlink" href="#generate.apps.GenerateConfig.default_auto_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.apps.GenerateConfig.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'generate'</span></em><a class="headerlink" href="#generate.apps.GenerateConfig.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-generate.consumers">
<span id="generate-consumers-module"></span><h2>generate.consumers module<a class="headerlink" href="#module-generate.consumers" title="Permalink to this heading">¶</a></h2>
<p>Websocket consumers for the generate app</p>
<p>This file contains the consumers for the generate app. The consumers are
responsible for handling the websocket connections and sending messages
regarding the generation of images.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.consumers.GenerateConsumer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.consumers.</span></span><span class="sig-name descname"><span class="pre">GenerateConsumer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.consumers.GenerateConsumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncWebsocketConsumer</span></code></p>
<p>Consumer for the generation of images</p>
<dl class="py method">
<dt class="sig sig-object py" id="generate.consumers.GenerateConsumer.connect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.consumers.GenerateConsumer.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the websocket is handshaking as part of initial connection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.consumers.GenerateConsumer.disconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.consumers.GenerateConsumer.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the websocket closes for any reason.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>close_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The code indicating why the connection closed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.consumers.GenerateConsumer.event_message">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">event_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.consumers.GenerateConsumer.event_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when we get a message from the room group.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.consumers.GenerateConsumer.receive">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">receive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.consumers.GenerateConsumer.receive" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when we get a text frame. Channels will JSON-decode the payload for
us and pass it as a dict to this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>text_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The data sent over the websocket</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-generate.file_utils">
<span id="generate-file-utils-module"></span><h2>generate.file_utils module<a class="headerlink" href="#module-generate.file_utils" title="Permalink to this heading">¶</a></h2>
<p>File and directory utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.file_utils.download_and_cache_models">
<span class="sig-prename descclassname"><span class="pre">generate.file_utils.</span></span><span class="sig-name descname"><span class="pre">download_and_cache_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_dicts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_download</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proxies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_files_only</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.file_utils.download_and_cache_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Download and cache the models</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.file_utils.get_allowed_patterns">
<span class="sig-prename descclassname"><span class="pre">generate.file_utils.</span></span><span class="sig-name descname"><span class="pre">get_allowed_patterns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.file_utils.get_allowed_patterns" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the allowed patterns for the given config dict.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.file_utils.get_cached_folder">
<span class="sig-prename descclassname"><span class="pre">generate.file_utils.</span></span><span class="sig-name descname"><span class="pre">get_cached_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_download</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proxies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_files_only</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.file_utils.get_cached_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cached folder for the given model.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.file_utils.get_checkpoint_path">
<span class="sig-prename descclassname"><span class="pre">generate.file_utils.</span></span><span class="sig-name descname"><span class="pre">get_checkpoint_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cached_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.file_utils.get_checkpoint_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the checkpoint path for the given attribute.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.file_utils.load_checkpoint">
<span class="sig-prename descclassname"><span class="pre">generate.file_utils.</span></span><span class="sig-name descname"><span class="pre">load_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checkpoint_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.file_utils.load_checkpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the checkpoint from the given path.</p>
</dd></dl>

</section>
<section id="module-generate.image">
<span id="generate-image-module"></span><h2>generate.image module<a class="headerlink" href="#module-generate.image" title="Permalink to this heading">¶</a></h2>
<p>Image utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.image.generate_image_status">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.image.</span></span><span class="sig-name descname"><span class="pre">generate_image_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FloatTensor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">latents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vae</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preview_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.image.generate_image_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Status callback for image generation.</p>
<p>Preview images are only sent if the VAE is provided.</p>
<p>Preview images reduce the performance of the generation process, by half of more.
:param step: The current step.
:type step: int
:param timestep: The current timestep, unused currently.
:type timestep: torch.FloatTensor
:param latents: The current latents.
:type latents: torch.Tensor
:param task_id: The task ID.
:type task_id: str
:param message: The message to send.
:type message: str
:param preview_image: Whether to send a preview image.
:type preview_image: bool</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.image.get_generator">
<span class="sig-prename descclassname"><span class="pre">generate.image.</span></span><span class="sig-name descname"><span class="pre">get_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span></span></span><a class="headerlink" href="#generate.image.get_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the generator for the given seed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The seed to use.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The generator with specified seed or a random seed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>torch.Generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.image.numpy_to_pil">
<span class="sig-prename descclassname"><span class="pre">generate.image.</span></span><span class="sig-name descname"><span class="pre">numpy_to_pil</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><span class="pre">PIL.Image.Image</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#generate.image.numpy_to_pil" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a numpy image or a batch of images to a PIL image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>images</strong> (<em>np.ndarray</em>) – The image or batch of images to convert.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The converted image or batch of images.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>PIL.Image.Image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.image.render_image">
<span class="sig-prename descclassname"><span class="pre">generate.image.</span></span><span class="sig-name descname"><span class="pre">render_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_path_or_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsfw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Image</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#generate.image.render_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_path_or_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The path or name of the model to use.</p></li>
<li><p><strong>nsfw</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to use the NSFW model.</p></li>
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The seed to use.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – The parameters to use.</p></li>
<li><p><strong>callback</strong> (<em>callable</em>) – The callback to use.</p></li>
<li><p><strong>callback_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The number of steps between callbacks.</p></li>
<li><p><strong>callback_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a>) – The arguments to pass to the callback.</p></li>
<li><p><strong>callback_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – The keyword arguments to pass to the callback.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The generated image and the seed used to generate it.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.image.save_error">
<span class="sig-prename descclassname"><span class="pre">generate.image.</span></span><span class="sig-name descname"><span class="pre">save_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">generated_image</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><span class="pre">GeneratedImage</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.image.save_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the error to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>generated_image</strong> (<a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><em>GeneratedImage</em></a>) – The generated image to save.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.image.save_generated_image">
<span class="sig-prename descclassname"><span class="pre">generate.image.</span></span><span class="sig-name descname"><span class="pre">save_generated_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">generated_image</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><span class="pre">GeneratedImage</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><span class="pre">datetime</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.image.save_generated_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the generated image to the database and filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>generated_image</strong> (<a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><em>GeneratedImage</em></a>) – The generated image to save.</p></li>
<li><p><strong>image</strong> (<em>torch.Tensor</em>) – The image to save.</p></li>
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The seed used to generate the image.</p></li>
<li><p><strong>duration</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The duration of the generation.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><em>datetime.datetime</em></a>) – The end time of the generation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-generate.input_validation">
<span id="generate-input-validation-module"></span><h2>generate.input_validation module<a class="headerlink" href="#module-generate.input_validation" title="Permalink to this heading">¶</a></h2>
<p>Input validation for the pipeline.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_callback_steps">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_callback_steps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback_steps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_callback_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the callback steps are a positive integer.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_generator_and_batch_size">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_generator_and_batch_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_generator_and_batch_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the generator is a list and has the same length as the batch size.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_initial_image_latents">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_initial_image_latents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">init_latents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_initial_image_latents" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the initial image latents and batch size are valid.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_negative_prompt_and_embeds">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_negative_prompt_and_embeds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">negative_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_prompt_embeds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_negative_prompt_and_embeds" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the negative prompt and negative prompt_embeds are valid.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_prompt_and_embeds">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_prompt_and_embeds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_embeds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_prompt_and_embeds" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the prompt and prompt_embeds are valid.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_prompt_and_negative_embeds_shape">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_prompt_and_negative_embeds_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt_embeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_prompt_embeds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_prompt_and_negative_embeds_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the prompt and negative prompt embeds have the same shape.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_prompt_type">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_prompt_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><span class="pre">list</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_prompt_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the prompt type is valid.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_strength_range">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_strength_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strength</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_strength_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the strength is in the range [0.0, 1.0].</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.input_validation.validate_width_and_height">
<span class="sig-prename descclassname"><span class="pre">generate.input_validation.</span></span><span class="sig-name descname"><span class="pre">validate_width_and_height</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.input_validation.validate_width_and_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that width and height are divisible by 8.</p>
</dd></dl>

</section>
<section id="module-generate.load_pipeline">
<span id="generate-load-pipeline-module"></span><h2>generate.load_pipeline module<a class="headerlink" href="#module-generate.load_pipeline" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="generate.load_pipeline.from_pretrained">
<span class="sig-prename descclassname"><span class="pre">generate.load_pipeline.</span></span><span class="sig-name descname"><span class="pre">from_pretrained</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DiffusionPipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.11)"><span class="pre">PathLike</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.load_pipeline.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a PyTorch diffusion pipeline from pre-trained pipeline weights.</p>
<dl class="simple">
<dt>The pipeline is set in evaluation mode by default using <cite>model.eval()</cite></dt><dd><p>(Dropout modules are deactivated).</p>
</dd>
<dt>The warning <em>Weights from XXX not initialized from pretrained model</em> means</dt><dd><p>that the weights of XXX do not come pretrained with the rest of the model.</p>
</dd>
</dl>
<p>It is up to you to train those weights with a downstream fine-tuning task.</p>
<dl class="simple">
<dt>The warning <em>Weights from XXX not used in YYY</em> means that the layer XXX is not used</dt><dd><p>by YYY, therefore those weights are discarded.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pretrained_model_name_or_path</strong> (<cite>str</cite> or <cite>os.PathLike</cite>) – <dl class="simple">
<dt>Can be either:</dt><dd><ul>
<li><p>A string, the <em>repo id</em> of a pretrained pipeline hosted inside
a model repo on <a class="reference external" href="https://huggingface.co/">https://huggingface.co/</a> Valid repo ids have to be
located under a user or organization name,
like <cite>CompVis/ldm-text2im-large-256</cite>.</p></li>
<li><p>A path to a <em>directory</em> containing pipeline weights saved using
[<cite>~DiffusionPipeline.save_pretrained</cite>], e.g., <cite>./my_pipeline_directory/</cite>.</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>torch_dtype</strong> (<cite>str</cite> or <cite>torch.dtype</cite>, <em>optional</em>) – <p>Override the default <cite>torch.dtype</cite> and load the model under this dtype.
If <cite>“auto”</cite> is passed the dtype will be automatically derived from the</p>
<blockquote>
<div><p>model’s weights.</p>
</div></blockquote>
</p></li>
<li><p><strong>custom_pipeline</strong> (<cite>str</cite>, <em>optional</em>) – <p>&lt;Tip warning={true}&gt;</p>
<blockquote>
<div><p>This is an experimental feature and is likely to change in the future.</p>
</div></blockquote>
<p>&lt;/Tip&gt;</p>
<p>Can be either:</p>
<blockquote>
<div><ul>
<li><dl>
<dt>A string, the <em>repo id</em> of a custom pipeline hosted inside a model repo on</dt><dd><p><a class="reference external" href="https://huggingface.co/">https://huggingface.co/</a>.</p>
</dd>
<dt>Valid repo ids have to be located under a user or organization name,</dt><dd><p>like <cite>hf-internal-testing/diffusers-dummy-pipeline</cite>.</p>
<blockquote>
<div><p>&lt;Tip&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>It is required that the model repo has a file, called <cite>pipeline.py</cite></dt><dd><p>that defines the custom pipeline.</p>
</dd>
</dl>
</div></blockquote>
<p>&lt;/Tip&gt;</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl>
<dt>A string, the <em>file name</em> of a community pipeline hosted on GitHub under</dt><dd><p><a class="reference external" href="https://github.com/huggingface/diffusers/tree/main/examples/community">https://github.com/huggingface/diffusers/tree/main/examples/community</a>.</p>
</dd>
<dt>Valid file names have to match exactly the file name without <cite>.py</cite></dt><dd><p>located under the above link, <em>e.g.</em> <cite>clip_guided_stable_diffusion</cite>.</p>
<blockquote>
<div><p>&lt;Tip&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>Community pipelines are always loaded from the current <cite>main</cite></dt><dd><p>branch of GitHub.</p>
</dd>
</dl>
</div></blockquote>
<p>&lt;/Tip&gt;</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl>
<dt>A path to a <em>directory</em> containing a custom pipeline, e.g.,</dt><dd><p><cite>./my_pipeline_directory/</cite>.</p>
<blockquote>
<div><p>&lt;Tip&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>It is required that the directory has a file, called <cite>pipeline.py</cite></dt><dd><p>that defines the custom pipeline.</p>
</dd>
</dl>
</div></blockquote>
<p>&lt;/Tip&gt;</p>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>For more information on how to load and create custom pipelines,</dt><dd><p>please have a look at [Loading and Adding Custom Pipelines]
(<a class="reference external" href="https://huggingface.co/docs/diffusers/using-diffusers/custom_pipeline_overview">https://huggingface.co/docs/diffusers/using-diffusers/custom_pipeline_overview</a>)</p>
</dd>
</dl>
</p></li>
<li><p><strong>torch_dtype</strong> – </p></li>
<li><p><strong>force_download</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – <dl class="simple">
<dt>Whether or not to force the (re-)download of the model weights and</dt><dd><p>configuration files, overriding the cached versions if they exist.</p>
</dd>
</dl>
</p></li>
<li><p><strong>resume_download</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – <dl class="simple">
<dt>Whether or not to delete incompletely received files. Will attempt</dt><dd><p>to resume the download if such a file exists.</p>
</dd>
</dl>
</p></li>
<li><p><strong>proxies</strong> (<cite>Dict[str, str]</cite>, <em>optional</em>) – <dl class="simple">
<dt>A dictionary of proxy servers to use by protocol or endpoint, e.g.,</dt><dd><p><cite>{‘http’: ‘foo.bar:3128’, ‘http://hostname’: ‘foo.bar:4012’}</cite>.
The proxies are used on each request.</p>
</dd>
</dl>
</p></li>
<li><p><strong>output_loading_info</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – <dl class="simple">
<dt>Whether or not to also return a dictionary containing missing keys,</dt><dd><p>unexpected keys and error messages.</p>
</dd>
</dl>
</p></li>
<li><p><strong>local_files_only</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – <dl class="simple">
<dt>Whether or not to only look at local files</dt><dd><p>(i.e., do not try to download the model).</p>
</dd>
</dl>
</p></li>
<li><p><strong>use_auth_token</strong> (<cite>str</cite> or <em>bool</em>, <em>optional</em>) – <p>The token to use as HTTP bearer authorization for remote files.
If <cite>True</cite>, will use the token generated when running <cite>huggingface-cli login</cite></p>
<blockquote>
<div><p>(stored in <cite>~/.huggingface</cite>).</p>
</div></blockquote>
</p></li>
<li><p><strong>revision</strong> (<cite>str</cite>, <em>optional</em>, defaults to <cite>“main”</cite>) – <dl class="simple">
<dt>The specific model version to use. It can be a branch name, a tag name,</dt><dd><p>or a commit id, since we use a git-based system for storing models and
other artifacts on huggingface.co, so <cite>revision</cite> can be any identifier
allowed by git.</p>
</dd>
</dl>
</p></li>
<li><p><strong>(</strong><strong>str</strong> (<em>custom_revision</em>) – <p>Hub and to local version of <cite>diffusers</cite> when loading from GitHub):
The specific model version to use. It can be a branch name, a tag name, or a</p>
<blockquote>
<div><p>commit id similar to <cite>revision</cite> when loading a custom pipeline from the Hub.</p>
</div></blockquote>
<p>It can be a diffusers version when loading a custom pipeline from GitHub.</p>
</p></li>
<li><p><strong>optional</strong> – <p>Hub and to local version of <cite>diffusers</cite> when loading from GitHub):
The specific model version to use. It can be a branch name, a tag name, or a</p>
<blockquote>
<div><p>commit id similar to <cite>revision</cite> when loading a custom pipeline from the Hub.</p>
</div></blockquote>
<p>It can be a diffusers version when loading a custom pipeline from GitHub.</p>
</p></li>
<li><p><strong>the</strong> (<em>defaults to &quot;main&quot; when loading from</em>) – <p>Hub and to local version of <cite>diffusers</cite> when loading from GitHub):
The specific model version to use. It can be a branch name, a tag name, or a</p>
<blockquote>
<div><p>commit id similar to <cite>revision</cite> when loading a custom pipeline from the Hub.</p>
</div></blockquote>
<p>It can be a diffusers version when loading a custom pipeline from GitHub.</p>
</p></li>
<li><p><strong>mirror</strong> (<cite>str</cite>, <em>optional</em>) – <dl class="simple">
<dt>Mirror source to accelerate downloads in China. If you are from China and have</dt><dd><p>an accessibility problem, you can set this option to resolve it.</p>
</dd>
</dl>
<p>Note that we do not guarantee the timeliness or safety.
Please refer to the mirror site for more information.
Specify the folder name here.</p>
</p></li>
<li><p><strong>device_map</strong> (<cite>str</cite> or <cite>Dict[str, Union[int, str, torch.device]]</cite>, <em>optional</em>) – <p>A map that specifies where each submodule should go.
It doesn’t need to be refined to each parameter/buffer name, once a given</p>
<blockquote>
<div><p>module name is inside, every submodule of it will be sent to the same device.</p>
</div></blockquote>
<dl class="simple">
<dt>To have Accelerate compute the most optimized <cite>device_map</cite> automatically,</dt><dd><p>set <cite>device_map=”auto”</cite>.</p>
</dd>
</dl>
<p>For more information about each option see [designing a device map]
(<a class="reference external" href="https://hf.co/docs/accelerate/main/en/usage_guides/big_modeling#designing-a-device-map">https://hf.co/docs/accelerate/main/en/usage_guides/big_modeling#designing-a-device-map</a>).</p>
</p></li>
<li><p><strong>(</strong><strong>bool</strong> (<em>low_cpu_mem_usage</em>) – <p>defaults to <cite>True</cite> if torch version &gt;= 1.9.0 else <cite>False</cite>):
Speed up model loading by not initializing the weights and</p>
<blockquote>
<div><p>only loading the pre-trained weights. This also tries to not use more than 1x
model size in CPU memory (including peak memory) while loading the model.</p>
</div></blockquote>
<p>This is only supported when torch version &gt;= 1.9.0.
If you are using an older version of torch, setting this argument to <cite>True</cite></p>
<blockquote>
<div><p>will raise an error.</p>
</div></blockquote>
</p></li>
<li><p><strong>optional</strong> – <p>defaults to <cite>True</cite> if torch version &gt;= 1.9.0 else <cite>False</cite>):
Speed up model loading by not initializing the weights and</p>
<blockquote>
<div><p>only loading the pre-trained weights. This also tries to not use more than 1x
model size in CPU memory (including peak memory) while loading the model.</p>
</div></blockquote>
<p>This is only supported when torch version &gt;= 1.9.0.
If you are using an older version of torch, setting this argument to <cite>True</cite></p>
<blockquote>
<div><p>will raise an error.</p>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>:param<span class="classifier">defaults to <cite>True</cite> if torch version &gt;= 1.9.0 else <cite>False</cite>):</span></dt><dd><dl class="simple">
<dt>Speed up model loading by not initializing the weights and</dt><dd><p>only loading the pre-trained weights. This also tries to not use more than 1x
model size in CPU memory (including peak memory) while loading the model.</p>
</dd>
</dl>
<p>This is only supported when torch version &gt;= 1.9.0.
If you are using an older version of torch, setting this argument to <cite>True</cite></p>
<blockquote>
<div><p>will raise an error.</p>
</div></blockquote>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>return_cached_folder</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – <dl class="simple">
<dt>If set to <cite>True</cite>, path to downloaded cached folder will be returned in addition</dt><dd><p>to loaded pipeline.</p>
</dd>
</dl>
</p></li>
<li><p><strong>kwargs</strong> (remaining dictionary of keyword arguments, <em>optional</em>) – <dl class="simple">
<dt>Can be used to overwrite load - and saveable variables -</dt><dd><p><em>i.e.</em> the pipeline components - of the specific pipeline class.</p>
</dd>
<dt>The overwritten components are then directly passed to the pipelines <cite>__init__</cite></dt><dd><p>method.</p>
</dd>
</dl>
<p>See example below for more information.</p>
</p></li>
</ul>
</dd>
</dl>
<p>&lt;Tip&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>It is required to be logged in (<cite>huggingface-cli login</cite>) when you want to use</dt><dd><p>private or [gated models]
(<a class="reference external" href="https://huggingface.co/docs/hub/models-gated#gated-models">https://huggingface.co/docs/hub/models-gated#gated-models</a>),
<em>e.g.</em> <cite>“runwayml/stable-diffusion-v1-5”</cite></p>
</dd>
</dl>
</div></blockquote>
<p>&lt;/Tip&gt;</p>
<p>&lt;Tip&gt;</p>
<dl class="simple">
<dt>Activate the special [“offline-mode”]</dt><dd><p>(<a class="reference external" href="https://huggingface.co/diffusers/installation.html#offline-mode">https://huggingface.co/diffusers/installation.html#offline-mode</a>) to use this
method in a firewalled environment.</p>
</dd>
</dl>
<p>&lt;/Tip&gt;</p>
<p>Examples:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>py
&gt;&gt;&gt; from diffusers import DiffusionPipeline</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Download pipeline from huggingface.co and cache.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">DiffusionPipeline</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">&quot;CompVis/ldm-text2im-large-256&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Download pipeline that requires an authorization token</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># For more information on access tokens, please refer to this section</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># of the documentation](https://huggingface.co/docs/hub/security-tokens)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">DiffusionPipeline</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">&quot;runwayml/stable-diffusion-v1-5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Use a different scheduler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">diffusers</span> <span class="kn">import</span> <span class="n">LMSDiscreteScheduler</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scheduler</span> <span class="o">=</span> <span class="n">LMSDiscreteScheduler</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">scheduler</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">scheduler</span> <span class="o">=</span> <span class="n">scheduler</span>
<span class="go">```</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.load_pipeline.get_allow_and_ignore_patterns_with_user_agent">
<span class="sig-prename descclassname"><span class="pre">generate.load_pipeline.</span></span><span class="sig-name descname"><span class="pre">get_allow_and_ignore_patterns_with_user_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipeline_config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.load_pipeline.get_allow_and_ignore_patterns_with_user_agent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.load_pipeline.is_safetensors_compatible">
<span class="sig-prename descclassname"><span class="pre">generate.load_pipeline.</span></span><span class="sig-name descname"><span class="pre">is_safetensors_compatible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#generate.load_pipeline.is_safetensors_compatible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-generate.models">
<span id="generate-models-module"></span><h2>generate.models module<a class="headerlink" href="#module-generate.models" title="Permalink to this heading">¶</a></h2>
<p>Models for the generate app.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.models.GeneratedImage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.models.</span></span><span class="sig-name descname"><span class="pre">GeneratedImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.GeneratedImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></p>
<p>Model for generated images.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.DoesNotExist">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span><a class="headerlink" href="#generate.models.GeneratedImage.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.djangoproject.com/en/4.1/ref/exceptions/#django.core.exceptions.ObjectDoesNotExist" title="(in Django v4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectDoesNotExist</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.MultipleObjectsReturned">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span><a class="headerlink" href="#generate.models.GeneratedImage.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.djangoproject.com/en/4.1/ref/exceptions/#django.core.exceptions.MultipleObjectsReturned" title="(in Django v4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleObjectsReturned</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.batch_number">
<span class="sig-name descname"><span class="pre">batch_number</span></span><a class="headerlink" href="#generate.models.GeneratedImage.batch_number" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#generate.models.GeneratedImage.created_at" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.duration">
<span class="sig-name descname"><span class="pre">duration</span></span><a class="headerlink" href="#generate.models.GeneratedImage.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.error">
<span class="sig-name descname"><span class="pre">error</span></span><a class="headerlink" href="#generate.models.GeneratedImage.error" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.filename">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">filename</span></span><a class="headerlink" href="#generate.models.GeneratedImage.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the filename.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.generated_at">
<span class="sig-name descname"><span class="pre">generated_at</span></span><a class="headerlink" href="#generate.models.GeneratedImage.generated_at" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.get_next_by_created_at">
<span class="sig-name descname"><span class="pre">get_next_by_created_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=&lt;django.db.models.fields.DateTimeField:</span> <span class="pre">created_at&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_next=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.GeneratedImage.get_next_by_created_at" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.get_previous_by_created_at">
<span class="sig-name descname"><span class="pre">get_previous_by_created_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=&lt;django.db.models.fields.DateTimeField:</span> <span class="pre">created_at&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_next=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.GeneratedImage.get_previous_by_created_at" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.guidance_scale">
<span class="sig-name descname"><span class="pre">guidance_scale</span></span><a class="headerlink" href="#generate.models.GeneratedImage.guidance_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.height">
<span class="sig-name descname"><span class="pre">height</span></span><a class="headerlink" href="#generate.models.GeneratedImage.height" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.host">
<span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#generate.models.GeneratedImage.host" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#generate.models.GeneratedImage.id" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.model">
<span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#generate.models.GeneratedImage.model" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.negative_prompt">
<span class="sig-name descname"><span class="pre">negative_prompt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">TextField</span></em><a class="headerlink" href="#generate.models.GeneratedImage.negative_prompt" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.nsfw">
<span class="sig-name descname"><span class="pre">nsfw</span></span><a class="headerlink" href="#generate.models.GeneratedImage.nsfw" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.num_inference_steps">
<span class="sig-name descname"><span class="pre">num_inference_steps</span></span><a class="headerlink" href="#generate.models.GeneratedImage.num_inference_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.objects">
<span class="sig-name descname"><span class="pre">objects</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;django.db.models.manager.Manager</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#generate.models.GeneratedImage.objects" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.owner">
<span class="sig-name descname"><span class="pre">owner</span></span><a class="headerlink" href="#generate.models.GeneratedImage.owner" title="Permalink to this definition">¶</a></dt>
<dd><p>Accessor to the related object on the forward side of a many-to-one or
one-to-one (via ForwardOneToOneDescriptor subclass) relation.</p>
<p>In the example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;children&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Child.parent</span></code> is a <code class="docutils literal notranslate"><span class="pre">ForwardManyToOneDescriptor</span></code> instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.owner_id">
<span class="sig-name descname"><span class="pre">owner_id</span></span><a class="headerlink" href="#generate.models.GeneratedImage.owner_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.prompt">
<span class="sig-name descname"><span class="pre">prompt</span></span><a class="headerlink" href="#generate.models.GeneratedImage.prompt" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.seed">
<span class="sig-name descname"><span class="pre">seed</span></span><a class="headerlink" href="#generate.models.GeneratedImage.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.task_id">
<span class="sig-name descname"><span class="pre">task_id</span></span><a class="headerlink" href="#generate.models.GeneratedImage.task_id" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.GeneratedImage.width">
<span class="sig-name descname"><span class="pre">width</span></span><a class="headerlink" href="#generate.models.GeneratedImage.width" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.models.</span></span><span class="sig-name descname"><span class="pre">RenderWorkerDevice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.RenderWorkerDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></p>
<p>Model for render worker devices.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.DoesNotExist">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.djangoproject.com/en/4.1/ref/exceptions/#django.core.exceptions.ObjectDoesNotExist" title="(in Django v4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectDoesNotExist</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.MultipleObjectsReturned">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.djangoproject.com/en/4.1/ref/exceptions/#django.core.exceptions.MultipleObjectsReturned" title="(in Django v4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleObjectsReturned</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.allocated_memory">
<span class="sig-name descname"><span class="pre">allocated_memory</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.allocated_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.cached_memory">
<span class="sig-name descname"><span class="pre">cached_memory</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.cached_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.created_at" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.device_id">
<span class="sig-name descname"><span class="pre">device_id</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.device_id" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.device_name">
<span class="sig-name descname"><span class="pre">device_name</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.device_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.get_next_by_created_at">
<span class="sig-name descname"><span class="pre">get_next_by_created_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=&lt;django.db.models.fields.DateTimeField:</span> <span class="pre">created_at&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_next=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.RenderWorkerDevice.get_next_by_created_at" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.get_next_by_last_update_at">
<span class="sig-name descname"><span class="pre">get_next_by_last_update_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=&lt;django.db.models.fields.DateTimeField:</span> <span class="pre">last_update_at&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_next=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.RenderWorkerDevice.get_next_by_last_update_at" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.get_previous_by_created_at">
<span class="sig-name descname"><span class="pre">get_previous_by_created_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=&lt;django.db.models.fields.DateTimeField:</span> <span class="pre">created_at&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_next=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.RenderWorkerDevice.get_previous_by_created_at" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.get_previous_by_last_update_at">
<span class="sig-name descname"><span class="pre">get_previous_by_last_update_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=&lt;django.db.models.fields.DateTimeField:</span> <span class="pre">last_update_at&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_next=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.models.RenderWorkerDevice.get_previous_by_last_update_at" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.host">
<span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.host" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.id" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.last_update_at">
<span class="sig-name descname"><span class="pre">last_update_at</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.last_update_at" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.objects">
<span class="sig-name descname"><span class="pre">objects</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;django.db.models.manager.Manager</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#generate.models.RenderWorkerDevice.objects" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.models.RenderWorkerDevice.total_memory">
<span class="sig-name descname"><span class="pre">total_memory</span></span><a class="headerlink" href="#generate.models.RenderWorkerDevice.total_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a deferred-loading field. When the value is read from this
object the first time, the query is executed.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-generate.noise">
<span id="generate-noise-module"></span><h2>generate.noise module<a class="headerlink" href="#module-generate.noise" title="Permalink to this heading">¶</a></h2>
<p>Noise functions</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.noise.decode_latents">
<span class="sig-prename descclassname"><span class="pre">generate.noise.</span></span><span class="sig-name descname"><span class="pre">decode_latents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vae</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">latents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="headerlink" href="#generate.noise.decode_latents" title="Permalink to this definition">¶</a></dt>
<dd><p>decode latents to image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vae</strong> (<em>VAE</em>) – VAE model</p></li>
<li><p><strong>latents</strong> (<em>torch.Tensor</em>) – latents</p></li>
<li><p><strong>Returns</strong> – image (np.ndarray): image</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.noise.denoise">
<span class="sig-prename descclassname"><span class="pre">generate.noise.</span></span><span class="sig-name descname"><span class="pre">denoise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scheduler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_timestep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_embeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_classifier_free_guidance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidance_scale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_step_kwargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timesteps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_warmup_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress_bar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_kwargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vae</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.noise.denoise" title="Permalink to this definition">¶</a></dt>
<dd><p>denoise the image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scheduler</strong> (<em>Scheduler</em>) – scheduler</p></li>
<li><p><strong>unet</strong> (<em>UNet</em>) – unet</p></li>
<li><p><strong>latents</strong> (<em>torch.Tensor</em>) – latents</p></li>
<li><p><strong>step</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – step</p></li>
<li><p><strong>current_timestep</strong> (<em>torch.Tensor</em>) – current timestep</p></li>
<li><p><strong>prompt_embeds</strong> (<em>torch.Tensor</em>) – prompt embeds</p></li>
<li><p><strong>do_classifier_free_guidance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – do classifier free guidance</p></li>
<li><p><strong>guidance_scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – guidance scale</p></li>
<li><p><strong>extra_step_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – extra step kwargs</p></li>
<li><p><strong>timesteps</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a>) – timesteps</p></li>
<li><p><strong>num_warmup_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – num warmup steps</p></li>
<li><p><strong>progress_bar</strong> (<em>tqdm</em>) – progress bar</p></li>
<li><p><strong>callback</strong> (<em>function</em>) – callback</p></li>
<li><p><strong>callback_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – callback steps</p></li>
<li><p><strong>callback_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a>) – callback args</p></li>
<li><p><strong>callback_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – callback kwargs</p></li>
<li><p><strong>vae</strong> (<em>VAE</em>) – VAE model</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>latents</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>latents (torch.Tensor)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-generate.pipeline">
<span id="generate-pipeline-module"></span><h2>generate.pipeline module<a class="headerlink" href="#module-generate.pipeline" title="Permalink to this heading">¶</a></h2>
<p>The pipeline module.</p>
<p>This module contains the main class for the HardDiffusion pipeline.</p>
<p>The HardDiffusion pipeline is a custom implementation of the DiffusionPipeline
class from the Diffusers library.</p>
<p>The reason for inheriting from the DiffusionPipeline class is to maintain
compatibility with the Diffusers library.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.pipeline.</span></span><span class="sig-name descname"><span class="pre">HardDiffusionPipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vae</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AutoencoderKL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CLIPTextModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CLIPTokenizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UNet2DConditionModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KarrasDiffusionSchedulers</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">SchedulerMixin</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ConfigMixin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safety_checker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">StableDiffusionSafetyChecker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_extractor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CLIPFeatureExtractor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requires_safety_checker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">DiffusionPipeline</span></code></p>
<p>HardDiffusionPipeline is a pipeline that can be used to generate images
from a given model or models.</p>
<p>Currently a modified version of the custom_merged_pipeline is used.</p>
<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.add_difference">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_difference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.add_difference" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the difference between theta1 and theta2 to theta0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.check_inputs">
<span class="sig-name descname"><span class="pre">check_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strength</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_embeds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_prompt_embeds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tensor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.check_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the user supplied pipeline inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> (<cite>str</cite> or <cite>List[str]</cite>) – The prompt or prompts to guide the image generation.
If not defined, one has to pass <cite>prompt_embeds</cite> instead.</p></li>
<li><p><strong>strength</strong> (<cite>float</cite>) – The strength of the prompt. Must be between 0 and 1.</p></li>
<li><p><strong>callback_steps</strong> (<cite>int</cite>) – The number of steps between each callback.</p></li>
<li><p><strong>height</strong> (<cite>int</cite>, <em>optional</em>) – The height of the generated image.
If not defined, one has to pass <cite>prompt_embeds</cite> instead.</p></li>
<li><p><strong>width</strong> (<cite>int</cite>, <em>optional</em>) – The width of the generated image.
If not defined, one has to pass <cite>prompt_embeds</cite> instead.</p></li>
<li><p><strong>negative_prompt</strong> (<cite>str</cite> or <cite>List[str]</cite>, <em>optional</em>) – The negative prompt or prompts to guide the image generation.
If not defined, one has to pass <cite>negative_prompt_embeds</cite> instead.
Alternatively, it can also be None.</p></li>
<li><p><strong>prompt_embeds</strong> (<cite>torch.Tensor</cite>, <em>optional</em>) – The prompt embeddings to guide the image generation.
If not defined, one has to pass <cite>prompt</cite> instead.</p></li>
<li><p><strong>negative_prompt_embeds</strong> (<cite>torch.Tensor</cite>, <em>optional</em>) – The negative prompt embeddings to guide the image generation.
If not defined, one has to pass <cite>negative_prompt</cite> instead.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – If the inputs are not valid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.create_final_pipeline">
<span class="sig-name descname"><span class="pre">create_final_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cached_folders</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">torch_dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.create_final_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the final pipeline</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.decode_latents">
<span class="sig-name descname"><span class="pre">decode_latents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FloatTensor</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.decode_latents" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode latents to image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>latents</strong> (<cite>torch.FloatTensor</cite>) – latents to decode</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>decoded image</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>image (<cite>np.ndarray</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.enable_sequential_cpu_offload">
<span class="sig-name descname"><span class="pre">enable_sequential_cpu_offload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gpu_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.enable_sequential_cpu_offload" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Offloads all models to CPU using accelerate, significantly reducing memory</dt><dd><p>usage. When called, unet, text_encoder, vae and safety checker have their
state dicts saved to CPU and then are moved to a <cite>torch.device(‘meta’) and
loaded to GPU only when their specific submodule has its `forward</cite> method
called.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.from_single_model">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_single_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.from_single_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a single pipeline</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.get_timesteps">
<span class="sig-name descname"><span class="pre">get_timesteps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_inference_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strength</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.get_timesteps" title="Permalink to this definition">¶</a></dt>
<dd><p>get the original timestep using init_timestep</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.inv_sigmoid">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inv_sigmoid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.inv_sigmoid" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse smoothstep interpolation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.11)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new pipeline object of the class ‘DiffusionPipeline’ with the merged
checkpoints(weights) of the models passed in the argument
‘pretrained_model_name_or_path_list’ as a list.</p>
<section id="parameters">
<h3>Parameters:<a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>pretrained_model_name_or_path_list : A list of valid pretrained model names
in the HuggingFace hub or paths to locally stored models in the
HuggingFace format.</p>
<dl>
<dt><a href="#id5"><span class="problematic" id="id6">**</span></a>kwargs:</dt><dd><p>Supports all the default DiffusionPipeline.get_config_dict kwargs viz..
cache_dir, resume_download, force_download, proxies, local_files_only,</p>
<blockquote>
<div><p>use_auth_token, revision, torch_dtype, device_map.</p>
</div></blockquote>
<dl>
<dt>alpha - The interpolation parameter. Ranges from 0 to 1.</dt><dd><dl class="simple">
<dt>It affects the ratio in which the checkpoints are merged. A 0.8 alpha</dt><dd><p>would mean that the first model checkpoints would affect the final
result far less than an alpha of 0.2</p>
</dd>
</dl>
</dd>
<dt>interp - The interpolation method to use for the merging.</dt><dd><p>Supports “sigmoid”, “inv_sigmoid”, “add_diff” and None.
Passing None uses the default interpolation which is weighted sum</p>
<blockquote>
<div><p>interpolation.</p>
</div></blockquote>
<p>For merging three checkpoints, only “add_diff” is supported.</p>
</dd>
<dt>force - Whether to ignore mismatch in model_config.json</dt><dd><p>for the current models. Defaults to False.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.prepare_extra_step_kwargs">
<span class="sig-name descname"><span class="pre">prepare_extra_step_kwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">generator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><span class="pre">torch._C.Generator</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.prepare_extra_step_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare extra kwargs for the scheduler step, since not all schedulers have
the same signature eta (η) is only used with the DDIMScheduler,
it will be ignored for other schedulers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>generator</strong> (<cite>torch.Generator</cite>) – torch generator</p></li>
<li><p><strong>eta</strong> (<cite>float</cite>) – η in DDIM paper: <a class="reference external" href="https://arxiv.org/abs/2010.02502">https://arxiv.org/abs/2010.02502</a>
should be between [0, 1]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>extra kwargs for the scheduler step</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>extra_step_kwargs (<cite>dict</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.prepare_latents">
<span class="sig-name descname"><span class="pre">prepare_latents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_channels_latents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_images_per_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latents</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.prepare_latents" title="Permalink to this definition">¶</a></dt>
<dd><p>prepare latents</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.run_safety_checker">
<span class="sig-name descname"><span class="pre">run_safety_checker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.run_safety_checker" title="Permalink to this definition">¶</a></dt>
<dd><p>run safety checker</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<cite>np.ndarray</cite>) – image to check</p></li>
<li><p><strong>device</strong> (<cite>torch.device</cite>) – torch device</p></li>
<li><p><strong>dtype</strong> (<cite>torch.dtype</cite>) – torch dtype</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>image after safety check
has_nsfw_concept (<cite>bool</cite>): whether the image has nsfw concept</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>image (<cite>np.ndarray</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.sigmoid">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sigmoid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.sigmoid" title="Permalink to this definition">¶</a></dt>
<dd><p>Smoothstep interpolation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.validate_mergable_models">
<span class="sig-name descname"><span class="pre">validate_mergable_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model_name_or_path_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.11)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_download</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_download</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proxies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_files_only</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_auth_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.validate_mergable_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the checkpoints can be merged</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline.HardDiffusionPipeline.weighted_sum">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">weighted_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.HardDiffusionPipeline.weighted_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighted sum interpolation.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.pipeline.get_pipeline">
<span class="sig-prename descclassname"><span class="pre">generate.pipeline.</span></span><span class="sig-name descname"><span class="pre">get_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_path_or_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsfw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.get_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pipeline for the given model path or name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.pipeline.preprocess">
<span class="sig-prename descclassname"><span class="pre">generate.pipeline.</span></span><span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocess the image for the model.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.pipeline.validate_safety_checker">
<span class="sig-prename descclassname"><span class="pre">generate.pipeline.</span></span><span class="sig-name descname"><span class="pre">validate_safety_checker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safety_checker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_extractor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requires_safety_checker</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline.validate_safety_checker" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the safety checker.</p>
</dd></dl>

</section>
<section id="module-generate.pipeline_configuration">
<span id="generate-pipeline-configuration-module"></span><h2>generate.pipeline_configuration module<a class="headerlink" href="#module-generate.pipeline_configuration" title="Permalink to this heading">¶</a></h2>
<p>Configuration utilities module for the pipeline.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.pipeline_configuration.PipelineConfiguration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.pipeline_configuration.</span></span><span class="sig-name descname"><span class="pre">PipelineConfiguration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/.cache/huggingface/hub'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_download</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_download</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proxies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_files_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_flax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_pipeline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">provider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sess_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_cpu_mem_usage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_cached_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_auth_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">torch_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline_configuration.PipelineConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Pipeline configuration class for the pipeline.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="generate.pipeline_configuration.PipelineConfiguration.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['cache_dir',</span> <span class="pre">'resume_download',</span> <span class="pre">'force_download',</span> <span class="pre">'proxies',</span> <span class="pre">'local_files_only',</span> <span class="pre">'from_flax',</span> <span class="pre">'custom_pipeline',</span> <span class="pre">'custom_revision',</span> <span class="pre">'provider',</span> <span class="pre">'sess_options',</span> <span class="pre">'low_cpu_mem_usage',</span> <span class="pre">'return_cached_folder',</span> <span class="pre">'use_auth_token',</span> <span class="pre">'revision',</span> <span class="pre">'torch_dtype',</span> <span class="pre">'device_map',</span> <span class="pre">'alpha',</span> <span class="pre">'interp']</span></em><a class="headerlink" href="#generate.pipeline_configuration.PipelineConfiguration.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.pipeline_configuration.PipelineConfiguration.remove_config_keys">
<span class="sig-name descname"><span class="pre">remove_config_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.pipeline_configuration.PipelineConfiguration.remove_config_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete configuration keys from a dict.
Optional modules are also passed in using kwargs.</p>
<p>This function is used to cleanup the kwargs before passing them to the
pipeline when loading a model.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-generate.pipeline_doc_example">
<span id="generate-pipeline-doc-example-module"></span><h2>generate.pipeline_doc_example module<a class="headerlink" href="#module-generate.pipeline_doc_example" title="Permalink to this heading">¶</a></h2>
<p>The example doc string for the pipeline.</p>
</section>
<section id="module-generate.prompt">
<span id="generate-prompt-module"></span><h2>generate.prompt module<a class="headerlink" href="#module-generate.prompt" title="Permalink to this heading">¶</a></h2>
<p>Prompt utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.prompt.duplicate_embeddings">
<span class="sig-prename descclassname"><span class="pre">generate.prompt.</span></span><span class="sig-name descname"><span class="pre">duplicate_embeddings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_images_per_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FloatTensor</span></span></span><a class="headerlink" href="#generate.prompt.duplicate_embeddings" title="Permalink to this definition">¶</a></dt>
<dd><p>duplicate embeddings for each generation per prompt,
using mps friendly method</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.prompt.get_attention_mask">
<span class="sig-prename descclassname"><span class="pre">generate.prompt.</span></span><span class="sig-name descname"><span class="pre">get_attention_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text_encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.prompt.get_attention_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the attention mask.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.prompt.get_embed_from_prompt">
<span class="sig-prename descclassname"><span class="pre">generate.prompt.</span></span><span class="sig-name descname"><span class="pre">get_embed_from_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.prompt.get_embed_from_prompt" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the embedding from the prompt.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.prompt.get_embeds_from_text_encoding">
<span class="sig-prename descclassname"><span class="pre">generate.prompt.</span></span><span class="sig-name descname"><span class="pre">get_embeds_from_text_encoding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text_encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attention_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.prompt.get_embeds_from_text_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the embeddings from the text encoding.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.prompt.get_unconditional_embed">
<span class="sig-prename descclassname"><span class="pre">generate.prompt.</span></span><span class="sig-name descname"><span class="pre">get_unconditional_embed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_embeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.prompt.get_unconditional_embed" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the embedding from the negative prompt.</p>
</dd></dl>

</section>
<section id="module-generate.render_devices">
<span id="generate-render-devices-module"></span><h2>generate.render_devices module<a class="headerlink" href="#module-generate.render_devices" title="Permalink to this heading">¶</a></h2>
<p>Render devices.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.render_devices.get_render_devices_by_id">
<span class="sig-prename descclassname"><span class="pre">generate.render_devices.</span></span><span class="sig-name descname"><span class="pre">get_render_devices_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.render_devices.get_render_devices_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the existing render workers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.render_devices.update_render_device_stats">
<span class="sig-prename descclassname"><span class="pre">generate.render_devices.</span></span><span class="sig-name descname"><span class="pre">update_render_device_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">render_device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">now</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.render_devices.update_render_device_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the render device stats.</p>
</dd></dl>

</section>
<section id="module-generate.routing">
<span id="generate-routing-module"></span><h2>generate.routing module<a class="headerlink" href="#module-generate.routing" title="Permalink to this heading">¶</a></h2>
<p>Websocket routing for the generate app.</p>
</section>
<section id="module-generate.schedulers">
<span id="generate-schedulers-module"></span><h2>generate.schedulers module<a class="headerlink" href="#module-generate.schedulers" title="Permalink to this heading">¶</a></h2>
<p>Scheduler utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.schedulers.validate_clip_sample">
<span class="sig-prename descclassname"><span class="pre">generate.schedulers.</span></span><span class="sig-name descname"><span class="pre">validate_clip_sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scheduler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.schedulers.validate_clip_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the clip sample.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.schedulers.validate_steps_offset">
<span class="sig-prename descclassname"><span class="pre">generate.schedulers.</span></span><span class="sig-name descname"><span class="pre">validate_steps_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scheduler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.schedulers.validate_steps_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the steps offset.</p>
</dd></dl>

</section>
<section id="module-generate.serializers">
<span id="generate-serializers-module"></span><h2>generate.serializers module<a class="headerlink" href="#module-generate.serializers" title="Permalink to this heading">¶</a></h2>
<p>Django Rest Framework Serializers for models in the generate app.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.serializers.</span></span><span class="sig-name descname"><span class="pre">GeneratedImageSerializer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicModelSerializer</span></code></p>
<p>Serializer for GeneratedImage model.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.Meta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Meta</span></span><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.Meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Meta class for GeneratedImageSerializer.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.Meta.exclude">
<span class="sig-name descname"><span class="pre">exclude</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.Meta.exclude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.Meta.list_serializer_class">
<span class="sig-name descname"><span class="pre">list_serializer_class</span></span><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.Meta.list_serializer_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicListSerializer</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.Meta.model">
<span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.Meta.model" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneratedImage</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.Meta.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'generated_image'</span></em><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.Meta.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validated_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><span class="pre">GeneratedImage</span></a></span></span><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and return a new <cite>GeneratedImages</cite> instance, given the validated data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>validated_data</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The validated data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The new GeneratedImage instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage">GeneratedImage</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.serializers.GeneratedImageSerializer.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><span class="pre">GeneratedImage</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">validated_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><span class="pre">GeneratedImage</span></a></span></span><a class="headerlink" href="#generate.serializers.GeneratedImageSerializer.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update and return an existing <cite>GeneratedImage</cite> instance, given the validated data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instance</strong> (<a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage"><em>GeneratedImage</em></a>) – The existing GeneratedImage instance.</p></li>
<li><p><strong>validated_data</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The validated data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The updated GeneratedImage instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#generate.models.GeneratedImage" title="generate.models.GeneratedImage">GeneratedImage</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-generate.tasks">
<span id="generate-tasks-module"></span><h2>generate.tasks module<a class="headerlink" href="#module-generate.tasks" title="Permalink to this heading">¶</a></h2>
<p>Celery tasks for generating images.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.tasks.ensure_model_name">
<span class="sig-prename descclassname"><span class="pre">generate.tasks.</span></span><span class="sig-name descname"><span class="pre">ensure_model_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_path_or_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#generate.tasks.ensure_model_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure the model name is set.</p>
<p>If the model name is not set, use the default model name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_path_or_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The model path or name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The model name.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-generate.tests">
<span id="generate-tests-module"></span><h2>generate.tests module<a class="headerlink" href="#module-generate.tests" title="Permalink to this heading">¶</a></h2>
<p>Tests for the generate app.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.tests.</span></span><span class="sig-name descname"><span class="pre">TestGeneratedImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">methodName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'runTest'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.TestGeneratedImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></p>
<p>Test the generate app.</p>
<dl class="py method">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage.setUp">
<span class="sig-name descname"><span class="pre">setUp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.tests.TestGeneratedImage.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage.test_nsfw_anything">
<span class="sig-name descname"><span class="pre">test_nsfw_anything</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.TestGeneratedImage.test_nsfw_anything" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the render_image function with nsfw=False and the anything model.
This model threw an error when nsfw=False and transformers 4.22.0 was used.</p>
<p>Fixed by transformers==4.27.0dev0</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage.test_nsfw_black_image">
<span class="sig-name descname"><span class="pre">test_nsfw_black_image</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.TestGeneratedImage.test_nsfw_black_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the render_image function with nsfw=False.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage.test_nsfw_no_black_image">
<span class="sig-name descname"><span class="pre">test_nsfw_no_black_image</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.TestGeneratedImage.test_nsfw_no_black_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the render_image function with nsfw=True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage.test_render_image">
<span class="sig-name descname"><span class="pre">test_render_image</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.TestGeneratedImage.test_render_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the render_image function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.tests.TestGeneratedImage.test_render_nfsw_image">
<span class="sig-name descname"><span class="pre">test_render_nfsw_image</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.TestGeneratedImage.test_render_nfsw_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the render_image function.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.tests.image_diff">
<span class="sig-prename descclassname"><span class="pre">generate.tests.</span></span><span class="sig-name descname"><span class="pre">image_diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.tests.image_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the difference between two images.</p>
</dd></dl>

</section>
<section id="module-generate.unet_utils">
<span id="generate-unet-utils-module"></span><h2>generate.unet_utils module<a class="headerlink" href="#module-generate.unet_utils" title="Permalink to this heading">¶</a></h2>
<p>Utilities for UNet models.</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate.unet_utils.validate_unet_sample_size">
<span class="sig-prename descclassname"><span class="pre">generate.unet_utils.</span></span><span class="sig-name descname"><span class="pre">validate_unet_sample_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.unet_utils.validate_unet_sample_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the UNet sample size.</p>
</dd></dl>

</section>
<section id="module-generate.urls">
<span id="generate-urls-module"></span><h2>generate.urls module<a class="headerlink" href="#module-generate.urls" title="Permalink to this heading">¶</a></h2>
<p>generate URL Configuration</p>
</section>
<section id="module-generate.views">
<span id="generate-views-module"></span><h2>generate.views module<a class="headerlink" href="#module-generate.views" title="Permalink to this heading">¶</a></h2>
<p>Views for the generate app.</p>
<p>Contains the following views:
- index: The main page for the generate app.
- queue_prompt: Queue a prompt to be generated.
- csrf_form: CSRF endpoint to get the middleware to set the token.
- images: Return generated images data as JSON.
- renderer_health: Check health of all renderer devices.
- renderer_status: The rendered status page.</p>
<p>Also contains the following viewsets:
- GeneratedImageViewSet: Viewset for the GeneratedImage model.</p>
<dl class="py class">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">GeneratedImageViewSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate.views.GeneratedImageViewSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicModelViewSet</span></code></p>
<p>This viewset automatically provides <cite>list</cite>, <cite>create</cite>, <cite>retrieve</cite>,
<cite>update</cite> and <cite>destroy</cite> actions.</p>
<p>Additionally, we will also provide an extra <cite>generate</cite> action in the future.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.basename">
<span class="sig-name descname"><span class="pre">basename</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#generate.views.GeneratedImageViewSet.basename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.description">
<span class="sig-name descname"><span class="pre">description</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#generate.views.GeneratedImageViewSet.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.detail">
<span class="sig-name descname"><span class="pre">detail</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#generate.views.GeneratedImageViewSet.detail" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#generate.views.GeneratedImageViewSet.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.perform_create">
<span class="sig-name descname"><span class="pre">perform_create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">serializer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#generate.serializers.GeneratedImageSerializer" title="generate.serializers.GeneratedImageSerializer"><span class="pre">GeneratedImageSerializer</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#generate.views.GeneratedImageViewSet.perform_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the owner of the image to the current user.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.permission_classes">
<span class="sig-name descname"><span class="pre">permission_classes</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[&lt;class</span> <span class="pre">'rest_framework.permissions.IsAuthenticatedOrReadOnly'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'user.permissions.IsOwnerOrReadOnly'&gt;]</span></em><a class="headerlink" href="#generate.views.GeneratedImageViewSet.permission_classes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.queryset">
<span class="sig-name descname"><span class="pre">queryset</span></span><a class="headerlink" href="#generate.views.GeneratedImageViewSet.queryset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.serializer_class">
<span class="sig-name descname"><span class="pre">serializer_class</span></span><a class="headerlink" href="#generate.views.GeneratedImageViewSet.serializer_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#generate.serializers.GeneratedImageSerializer" title="generate.serializers.GeneratedImageSerializer"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneratedImageSerializer</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="generate.views.GeneratedImageViewSet.suffix">
<span class="sig-name descname"><span class="pre">suffix</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#generate.views.GeneratedImageViewSet.suffix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.views.csrf_form">
<span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">csrf_form</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HttpRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">HttpResponse</span></span></span><a class="headerlink" href="#generate.views.csrf_form" title="Permalink to this definition">¶</a></dt>
<dd><p>CSRF endpoint to get the middleware to set the token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – The request object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The rendered template.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.views.images">
<span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HttpRequest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">JsonResponse</span></span></span><a class="headerlink" href="#generate.views.images" title="Permalink to this definition">¶</a></dt>
<dd><p>Return generated images data as JSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – The request object.</p></li>
<li><p><strong>last</strong> – The last image to return.</p></li>
<li><p><strong>page_size</strong> – The number of images to return.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A JSON response with a list of generated image data in the <cite>images</cite> key,
and a <cite>total</cite> key with the total number of images.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.views.index">
<span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HttpRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">HttpResponse</span></span></span><a class="headerlink" href="#generate.views.index" title="Permalink to this definition">¶</a></dt>
<dd><p>The endpoint that returns the html UI used to generate images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – The request object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The rendered template.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.views.queue_prompt">
<span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">queue_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HttpRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">JsonResponse</span></span></span><a class="headerlink" href="#generate.views.queue_prompt" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a prompt to be generated.</p>
<p>Parses the request parameters and queues a celery task to generate an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – The request object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A JSON response with an <cite>error</cite> key and a <cite>task_id</cite> key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.views.renderer_health">
<span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">renderer_health</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HttpRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">JsonResponse</span></span></span><a class="headerlink" href="#generate.views.renderer_health" title="Permalink to this definition">¶</a></dt>
<dd><p>Check health of all renderer devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – The request object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A JSON response with a list of renderer device stats for the currently</dt><dd><p>connected hosts by hostname.</p>
</dd>
</dl>
<p>Each device reports the following stats:
- id: The device ID.
- name: The device name.
- usage: The memory usage.
- memory: The total memory.
- device_allocated: The allocated memory.
- device_cached: The cached memory.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="generate.views.renderer_status">
<span class="sig-prename descclassname"><span class="pre">generate.views.</span></span><span class="sig-name descname"><span class="pre">renderer_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HttpRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">HttpResponse</span></span></span><a class="headerlink" href="#generate.views.renderer_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the renderer status page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – The request object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The rendered template.
Displays a list of renderer devices by hostname.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-generate.warnings">
<span id="generate-warnings-module"></span><h2>generate.warnings module<a class="headerlink" href="#module-generate.warnings" title="Permalink to this heading">¶</a></h2>
<p>Deprecation warnings for the generate module.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Hard Diffusion</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=BillSchumacher&repo=HardDiffusion&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">HardDiffusion</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="HardDiffusion.html">HardDiffusion package</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">api package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">generate package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generate.templatetags.html">generate.templatetags package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.admin">generate.admin module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.apps">generate.apps module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.apps.GenerateConfig"><code class="docutils literal notranslate"><span class="pre">GenerateConfig</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.consumers">generate.consumers module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.consumers.GenerateConsumer"><code class="docutils literal notranslate"><span class="pre">GenerateConsumer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.file_utils">generate.file_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.file_utils.download_and_cache_models"><code class="docutils literal notranslate"><span class="pre">download_and_cache_models()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.file_utils.get_allowed_patterns"><code class="docutils literal notranslate"><span class="pre">get_allowed_patterns()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.file_utils.get_cached_folder"><code class="docutils literal notranslate"><span class="pre">get_cached_folder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.file_utils.get_checkpoint_path"><code class="docutils literal notranslate"><span class="pre">get_checkpoint_path()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.file_utils.load_checkpoint"><code class="docutils literal notranslate"><span class="pre">load_checkpoint()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.image">generate.image module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.image.generate_image_status"><code class="docutils literal notranslate"><span class="pre">generate_image_status()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.image.get_generator"><code class="docutils literal notranslate"><span class="pre">get_generator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.image.numpy_to_pil"><code class="docutils literal notranslate"><span class="pre">numpy_to_pil()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.image.render_image"><code class="docutils literal notranslate"><span class="pre">render_image()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.image.save_error"><code class="docutils literal notranslate"><span class="pre">save_error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.image.save_generated_image"><code class="docutils literal notranslate"><span class="pre">save_generated_image()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.input_validation">generate.input_validation module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_callback_steps"><code class="docutils literal notranslate"><span class="pre">validate_callback_steps()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_generator_and_batch_size"><code class="docutils literal notranslate"><span class="pre">validate_generator_and_batch_size()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_initial_image_latents"><code class="docutils literal notranslate"><span class="pre">validate_initial_image_latents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_negative_prompt_and_embeds"><code class="docutils literal notranslate"><span class="pre">validate_negative_prompt_and_embeds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_prompt_and_embeds"><code class="docutils literal notranslate"><span class="pre">validate_prompt_and_embeds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_prompt_and_negative_embeds_shape"><code class="docutils literal notranslate"><span class="pre">validate_prompt_and_negative_embeds_shape()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_prompt_type"><code class="docutils literal notranslate"><span class="pre">validate_prompt_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_strength_range"><code class="docutils literal notranslate"><span class="pre">validate_strength_range()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.input_validation.validate_width_and_height"><code class="docutils literal notranslate"><span class="pre">validate_width_and_height()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.load_pipeline">generate.load_pipeline module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.load_pipeline.from_pretrained"><code class="docutils literal notranslate"><span class="pre">from_pretrained()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.load_pipeline.get_allow_and_ignore_patterns_with_user_agent"><code class="docutils literal notranslate"><span class="pre">get_allow_and_ignore_patterns_with_user_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.load_pipeline.is_safetensors_compatible"><code class="docutils literal notranslate"><span class="pre">is_safetensors_compatible()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.models">generate.models module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.models.GeneratedImage"><code class="docutils literal notranslate"><span class="pre">GeneratedImage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.models.RenderWorkerDevice"><code class="docutils literal notranslate"><span class="pre">RenderWorkerDevice</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.noise">generate.noise module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.noise.decode_latents"><code class="docutils literal notranslate"><span class="pre">decode_latents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.noise.denoise"><code class="docutils literal notranslate"><span class="pre">denoise()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.pipeline">generate.pipeline module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.pipeline.HardDiffusionPipeline"><code class="docutils literal notranslate"><span class="pre">HardDiffusionPipeline</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.pipeline.get_pipeline"><code class="docutils literal notranslate"><span class="pre">get_pipeline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.pipeline.preprocess"><code class="docutils literal notranslate"><span class="pre">preprocess()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.pipeline.validate_safety_checker"><code class="docutils literal notranslate"><span class="pre">validate_safety_checker()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.pipeline_configuration">generate.pipeline_configuration module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.pipeline_configuration.PipelineConfiguration"><code class="docutils literal notranslate"><span class="pre">PipelineConfiguration</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.pipeline_doc_example">generate.pipeline_doc_example module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.prompt">generate.prompt module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.prompt.duplicate_embeddings"><code class="docutils literal notranslate"><span class="pre">duplicate_embeddings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.prompt.get_attention_mask"><code class="docutils literal notranslate"><span class="pre">get_attention_mask()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.prompt.get_embed_from_prompt"><code class="docutils literal notranslate"><span class="pre">get_embed_from_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.prompt.get_embeds_from_text_encoding"><code class="docutils literal notranslate"><span class="pre">get_embeds_from_text_encoding()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.prompt.get_unconditional_embed"><code class="docutils literal notranslate"><span class="pre">get_unconditional_embed()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.render_devices">generate.render_devices module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.render_devices.get_render_devices_by_id"><code class="docutils literal notranslate"><span class="pre">get_render_devices_by_id()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.render_devices.update_render_device_stats"><code class="docutils literal notranslate"><span class="pre">update_render_device_stats()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.routing">generate.routing module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.schedulers">generate.schedulers module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.schedulers.validate_clip_sample"><code class="docutils literal notranslate"><span class="pre">validate_clip_sample()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.schedulers.validate_steps_offset"><code class="docutils literal notranslate"><span class="pre">validate_steps_offset()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.serializers">generate.serializers module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.serializers.GeneratedImageSerializer"><code class="docutils literal notranslate"><span class="pre">GeneratedImageSerializer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.tasks">generate.tasks module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.tasks.ensure_model_name"><code class="docutils literal notranslate"><span class="pre">ensure_model_name()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.tests">generate.tests module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.tests.TestGeneratedImage"><code class="docutils literal notranslate"><span class="pre">TestGeneratedImage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.tests.image_diff"><code class="docutils literal notranslate"><span class="pre">image_diff()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.unet_utils">generate.unet_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.unet_utils.validate_unet_sample_size"><code class="docutils literal notranslate"><span class="pre">validate_unet_sample_size()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.urls">generate.urls module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.views">generate.views module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.GeneratedImageViewSet"><code class="docutils literal notranslate"><span class="pre">GeneratedImageViewSet</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.csrf_form"><code class="docutils literal notranslate"><span class="pre">csrf_form()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.images"><code class="docutils literal notranslate"><span class="pre">images()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.index"><code class="docutils literal notranslate"><span class="pre">index()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.queue_prompt"><code class="docutils literal notranslate"><span class="pre">queue_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.renderer_health"><code class="docutils literal notranslate"><span class="pre">renderer_health()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate.views.renderer_status"><code class="docutils literal notranslate"><span class="pre">renderer_status()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-generate.warnings">generate.warnings module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="model.html">model package</a></li>
<li class="toctree-l2"><a class="reference internal" href="train.html">train package</a></li>
<li class="toctree-l2"><a class="reference internal" href="user.html">user package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">HardDiffusion</a><ul>
      <li>Previous: <a href="api.html" title="previous chapter">api package</a></li>
      <li>Next: <a href="generate.templatetags.html" title="next chapter">generate.templatetags package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy;2023, Bill Schumacher.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/generate.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/BillSchumacher/HardDiffusion" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
<div class="footer">This page uses <a href="https://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>